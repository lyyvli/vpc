# 添加子网路由到路由表 {#concept_187313 .concept}

您可以在专有网络内创建自定义路由表，并在自定义路由表中添加子网路由，然后将自定义路由表绑定交换机，来控制该交换机的流量，更灵活地进行网络管理。

## 前提条件 {#section_bwg_vwq_gcm .section}

您已经创建了专有网络和交换机。详细信息，请参见[管理专有网络](cn.zh-CN/用户指南/专有网络和子网/管理专有网络.md#)。

## 使用限制 {#section_pp4_w5m_1as .section}

添加子网路由到路由表，您必须了解以下限制：

-   每个专有网络最多可以有10张路由表，包括系统路由表。
-   每个交换机只能绑定一张路由表。
-   自定义路由表不支持主备路由和负载路由。
-   目前，除华北2（北京）、华南1（深圳）和华东1（杭州）地域外，其它地域均支持创建自定义路由表。

## 步骤一：创建自定义路由表 {#section_ate_8wr_8xn .section}

完成以下操作，创建自定义路由表：

1.  登录[专有网络管理控制台](https://vpcnext.console.aliyun.com/nat/)。
2.  在左侧导航栏，单击**路由表**。
3.  选择路由表的地域。
4.  在路由表页面，单击**创建路由表**。
5.  在创建路由表页面，根据以下信息配置路由表，然后单击**确定**。

    |配置|说明|
    |:-|:-|
    |**名称**|输入路由表的名称。 名称长度为2-128个字符，以英文字母或中文开头，可包含数字，下划线（\_）和短横线（-）。

 |
    |**专有网络**|选择路由表所属的专有网络。|
    |**描述**|输入路由表的描述。 描述长度为在2-256个字符，不能以`http://` 和 `https://` 开始。

 |


## 步骤二：添加子网路由 {#section_qjn_6no_zrf .section}

完成以下操作，添加子网路由到路由表：

1.  在左侧导航栏，单击**路由表**。
2.  在路由表页面，找到目标路由表，单击**操作**列下的**管理**。
3.  在路由条目列表页签，单击**添加路由条目**。
4.  在添加路由条目页面，根据以下信息配置子网路由条目，然后单击**确定**。

    |配置|说明|
    |:-|:-|
    |**目标网段**|要转发到的目标网段。     -   **IPv4网段**：转发IPv4地址的流量。
    -   **IPv6网段**：转发IPv6地址的流量。
 |
    |**下一跳类型和下一跳**|选择下一跳类型：     -   **ECS实例**：将目的地址在目标网段范围内的流量路由至选择的ECS实例。

适用于将指定网络访问路由至ECS实例进行流量统一转发和管理的场景，例如将一台ECS实例配置为公网网关管理其他ECS实例访问公网。

    -   **VPN网关**：将目的地址在目标网段范围内的流量路由至选择的VPN网关。
    -   **NAT网关**：将目的地址在目标网段范围内的流量路由至选择的NAT网关。
    -   **辅助弹性网卡**：将目的地址在目标网段范围内的流量路由至选择的辅助弹性网卡。
    -   **路由器接口（专有网络方向）**：将目的地址在目标网段范围内的流量路由至选择的VPC。

适用于使用高速通道连接VPC的场景。

    -   **路由器接口（边界路由器方向）**：将目的地址在目标网段范围内的流量路由至边界路由器关联的路由器接口。

适用于使用高速通道连接本地数据中心的场景。

此种模式下，您还需要选择路由的方式：

        -   **普通路由**：选择一个关联的路由器接口。
        -   **主备路由**：主备路由仅支持两个实例作为下一跳，主路由下一跳权重为100，备份路由下一跳权重为0。当主路由健康检查失败时，备份路由生效。
        -   **负载路由**：负载分担路由需要选择2-4个路由器接口作为下一跳，且作为下一跳的路由器接口的对端路由器类型必须为边界路由器。实例权重的有效范围为1-255的整数，默认值为100。每个实例的权重必须相同，系统会将流量平均分配给下一跳实例。
    -   **IPv6网关**：将目的地址在目标网段范围内的流量路由至选择的IPv6网关实例。

**说明：** 该选项只有当目标网段为IPv6网段时才可用。

 |

    关于子网路由的应用示例，请参见[路由示例](cn.zh-CN/用户指南/路由/概述.md#section_eh3_vny_rdb)。


## 步骤三：绑定交换机 {#section_x47_qsf_673 .section}

您可以将创建的路由表绑定到交换机上，控制该交换机（子网）的路由。一个交换机只能关联一张路由表包括系统路由表。 完成以下操作，将创建的自定义路由表绑定到一个交换机上：

1.  在左侧导航栏，单击**路由表**。
2.  在路由表页面，找到目标路由表，单击**操作**列下的**管理**。
3.  单击**已绑定交换机**页签，然后单击**绑定交换机**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/17037/15607397898675_zh-CN.png)

4.  在绑定交换机页面，选择要绑定的交换机，然后单击**确定**。

