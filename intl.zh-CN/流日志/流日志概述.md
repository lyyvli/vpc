# 流日志概述 {#concept_1357832 .concept}

VPC提供流日志功能，可以记录VPC网络中弹性网卡（ENI）的传入和传出流量信息，帮助您检查访问控制规则、监控网络流量、进行网络故障排查。

**说明：** 目前，仅华北5（呼和浩特）、马来西亚（吉隆坡）、印度尼西亚（雅加达）、英国（伦敦）、印度（孟买）地域支持流日志功能。

## 功能介绍 {#section_rr5_iph_ms8 .section}

您可以捕获指定弹性网卡的流量，也可以捕获指定VPC或交换机的流量。如果选择为VPC或交换机创建流日志，则会捕获VPC和交换机中所有弹性网卡的流量，包括在开启流日志功能后新建的弹性网卡。

捕捉到的流量信息存储在阿里云日志服务中，您可以在日志服务中查看和分析相关数据。流日志功能测试期间暂不收取费用，日志服务将收取相应的存储和检索费用。

流日志功能捕获的流量信息会以流日志记录的方式写入日志服务中。每条流日志记录会捕获特定捕获窗口中的特定五元组网络流，捕获窗口大约为10分钟，该段时间内流日志服务会先聚合数据，然后再发布流日志记录。

流日志记录的字段信息如下表所示。

|字段|说明|
|:-|:-|
|version|流日志版本。|
|vswitch-id|弹性网卡所在交换机ID。|
|vm-id|弹性网卡绑定的云服务器ID。|
|vpc-id|弹性网卡所在专有网络ID。|
|account-id|账号ID。|
|eni-id|弹性网卡ID。|
|srcaddr|源地址。|
|srcport|源端口。|
|dstaddr|目的地址。|
|dstport|目的端口。|
|protocol|流量的IANA协议编号。 详细信息，请参见[Internet 协议编号](http://www.iana.org/assignments/protocol-numbers/protocol-numbers.xhtml)。

 |
|direction|流量方向： -   in：入方向流量。
-   out：出方向流量。

 |
|packets|数据包数量。|
|bytes|数据包大小。|
|start|捕捉窗口开始时间。|
|end|捕捉窗口结束时间。|
|log-status|流日志的日志记录状态： -   OK：数据记录正常。
-   NODATA：捕获窗口中没有传入或传出网络接口的网络流量。
-   SKIPDATA：捕获窗口中跳过了一些流日志记录。

 |
|action|与流量关联的操作： -   ACCEPT：安全组允许记录的流量。
-   REJECT：安全组未允许记录的流量。

 |

## 配置流程 {#section_3et_c62_ry9 .section}

配置流日志的流程如下：

![配置流日志的流程](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/1082282/156635079153062_zh-CN.png)

1.  开通日志服务

    通过流日志功能捕获到的流量信息存储在阿里云日志服务中。创建流日志前，您需要在日志服务产品页开通日志服务。

2.  （可选）创建密钥对

    如果您需要通过API/SDK写入数据，请创建密钥对；如果您通过Logtail采集日志，则不需要创建密钥对。

3.  创建Project

    您需要为日志服务创建一个Project。详细信息，请参见[创建Project](../../../../intl.zh-CN/准备工作/操作Project.md#section_ahq_ggx_ndb)。

4.  创建Logstore

    Logstore是Project的资源集合，Logstore中的所有数据都来自于同一个数据源。创建Project后，您需要创建Logstore。详细信息，请参见[创建Logstore](../../../../intl.zh-CN/准备工作/操作Logstore.md#section_v52_2jx_ndb)。

5.  创建捕获资源

    创建流日志前，您需要创建捕获日志的资源。您可以捕获指定弹性网卡的日志，也可以捕获指定VPC或交换机的日志。详细信息，请参见[创建弹性网卡](../../../../intl.zh-CN/网络/弹性网卡/创建弹性网卡.md#)、[创建专有网络](../../../../intl.zh-CN/专有网络和交换机/管理专有网络/创建专有网络.md#)和[创建交换机](../../../../intl.zh-CN/专有网络和交换机/管理交换机/创建交换机.md#)。

6.  创建流日志

    您可以创建流日志，流日志可以捕获加载到云企业网内不同地域的网络实例间的流量信息。详细信息，请参见[创建流日志](intl.zh-CN/流日志/创建流日志.md#)。

7.  查看流日志

    创建流日志后，您可以查看流日志。通过查看捕获的流量信息，您可以分析跨地域业务流量、优化使用成本和排查网络故障。详细信息，请参见[查看流日志](intl.zh-CN/流日志/查看流日志.md#)。


## 使用限制 {#section_06z_qjd_dq6 .section}

每个地域支持创建10个流日志实例。如需更多配额，请[提交工单](https://workorder-intl.console.aliyun.com/#/ticket/createIndex)。

